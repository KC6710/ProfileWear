/*!
 * vue-virtual-scroll-list v2.3.3
 * open source under the MIT license
 * https://github.com/tangbc/vue-virtual-scroll-list#readme
 */
(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a(require("vue")):typeof define==="function"&&define.amd?define(["vue"],a):(b=b||self,b.VirtualList=a(b.Vue))}(this,(function(W){W=W&&Object.prototype.hasOwnProperty.call(W,"default")?W["default"]:W;function V(af,ag){if(!(af instanceof ag)){throw new TypeError("Cannot call a class as a function")}}function D(ai,ag){for(var af=0;af<ag.length;af++){var ah=ag[af];ah.enumerable=ah.enumerable||false;ah.configurable=true;if("value" in ah){ah.writable=true}Object.defineProperty(ai,ah.key,ah)}}function j(ah,af,ag){if(af){D(ah.prototype,af)}if(ag){D(ah,ag)}return ah}function Y(ah,af,ag){if(af in ah){Object.defineProperty(ah,af,{value:ag,enumerable:true,configurable:true,writable:true})}else{ah[af]=ag}return ah}function ae(ag,ah){var ai=Object.keys(ag);if(Object.getOwnPropertySymbols){var af=Object.getOwnPropertySymbols(ag);if(ah){af=af.filter(function(aj){return Object.getOwnPropertyDescriptor(ag,aj).enumerable})}ai.push.apply(ai,af)}return ai}function t(ah){for(var af=1;af<arguments.length;af++){var ag=arguments[af]!=null?arguments[af]:{};if(af%2){ae(Object(ag),true).forEach(function(ai){Y(ah,ai,ag[ai])})}else{if(Object.getOwnPropertyDescriptors){Object.defineProperties(ah,Object.getOwnPropertyDescriptors(ag))}else{ae(Object(ag)).forEach(function(ai){Object.defineProperty(ah,ai,Object.getOwnPropertyDescriptor(ag,ai))})}}}return ah}function N(af){return b(af)||w(af)||u(af)||k()}function b(af){if(Array.isArray(af)){return a(af)}}function w(af){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(af)){return Array.from(af)}}function u(ag,af){if(!ag){return}if(typeof ag==="string"){return a(ag,af)}var ah=Object.prototype.toString.call(ag).slice(8,-1);if(ah==="Object"&&ag.constructor){ah=ag.constructor.name}if(ah==="Map"||ah==="Set"){return Array.from(ah)}if(ah==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ah)){return a(ag,af)}}function a(ag,af){if(af==null||af>ag.length){af=ag.length}for(var ai=0,ah=new Array(af);ai<af;ai++){ah[ai]=ag[ai]}return ah}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r={FRONT:"FRONT",BEHIND:"BEHIND"};var Q={INIT:"INIT",FIXED:"FIXED",DYNAMIC:"DYNAMIC"};var S=0;var B=function(){function az(aF,aE){V(this,az);this.init(aF,aE)}j(az,[{key:"init",value:function av(aF,aE){this.param=aF;this.callUpdate=aE;this.sizes=new Map();this.firstRangeTotalSize=0;this.firstRangeAverageSize=0;this.lastCalcIndex=0;this.fixedSizeValue=0;this.calcType=Q.INIT;this.offset=0;this.direction="";this.range=Object.create(null);if(aF){this.checkRange(0,aF.keeps-1)}}},{key:"destroy",value:function aA(){this.init(null,null)}},{key:"getRange",value:function aD(){var aE=Object.create(null);aE.start=this.range.start;aE.end=this.range.end;aE.padFront=this.range.padFront;aE.padBehind=this.range.padBehind;return aE}},{key:"isBehind",value:function au(){return this.direction===r.BEHIND}},{key:"isFront",value:function aq(){return this.direction===r.FRONT}},{key:"getOffset",value:function ai(aE){return(aE<1?0:this.getIndexOffset(aE))+this.param.slotHeaderSize}},{key:"updateParam",value:function aj(aE,aF){var aG=this;if(this.param&&aE in this.param){if(aE==="uniqueIds"){this.sizes.forEach(function(aH,aI){if(!aF.includes(aI)){aG.sizes["delete"](aI)}})}this.param[aE]=aF}}},{key:"saveSize",value:function an(aF,aE){this.sizes.set(aF,aE);if(this.calcType===Q.INIT){this.fixedSizeValue=aE;this.calcType=Q.FIXED}else{if(this.calcType===Q.FIXED&&this.fixedSizeValue!==aE){this.calcType=Q.DYNAMIC;delete this.fixedSizeValue}}if(this.calcType!==Q.FIXED&&typeof this.firstRangeTotalSize!=="undefined"){if(this.sizes.size<Math.min(this.param.keeps,this.param.uniqueIds.length)){this.firstRangeTotalSize=N(this.sizes.values()).reduce(function(aG,aH){return aG+aH},0);this.firstRangeAverageSize=Math.round(this.firstRangeTotalSize/this.sizes.size)}else{delete this.firstRangeTotalSize}}}},{key:"handleDataSourcesChange",value:function ar(){var aE=this.range.start;if(this.isFront()){aE=aE-S}else{if(this.isBehind()){aE=aE+S}}aE=Math.max(aE,0);this.updateRange(this.range.start,this.getEndByStart(aE))}},{key:"handleSlotSizeChange",value:function aw(){this.handleDataSourcesChange()}},{key:"handleScroll",value:function ah(aE){this.direction=aE<this.offset?r.FRONT:r.BEHIND;this.offset=aE;if(!this.param){return}if(this.direction===r.FRONT){this.handleFront()}else{if(this.direction===r.BEHIND){this.handleBehind()}}}},{key:"handleFront",value:function aB(){var aE=this.getScrollOvers();if(aE>this.range.start){return}var aF=Math.max(aE-this.param.buffer,0);this.checkRange(aF,this.getEndByStart(aF))}},{key:"handleBehind",value:function al(){var aE=this.getScrollOvers();if(aE<this.range.start+this.param.buffer){return}this.checkRange(aE,this.getEndByStart(aE))}},{key:"getScrollOvers",value:function am(){var aI=this.offset-this.param.slotHeaderSize;if(aI<=0){return 0}if(this.isFixedType()){return Math.floor(aI/this.fixedSizeValue)}var aE=0;var aF=0;var aH=0;var aG=this.param.uniqueIds.length;while(aE<=aG){aF=aE+Math.floor((aG-aE)/2);aH=this.getIndexOffset(aF);if(aH===aI){return aF}else{if(aH<aI){aE=aF+1}else{if(aH>aI){aG=aF-1}}}}return aE>0?--aE:0}},{key:"getIndexOffset",value:function ax(aE){if(!aE){return 0}var aG=0;var aH=0;for(var aF=0;aF<aE;aF++){aH=this.sizes.get(this.param.uniqueIds[aF]);aG=aG+(typeof aH==="number"?aH:this.getEstimateSize())}this.lastCalcIndex=Math.max(this.lastCalcIndex,aE-1);this.lastCalcIndex=Math.min(this.lastCalcIndex,this.getLastIndex());return aG}},{key:"isFixedType",value:function at(){return this.calcType===Q.FIXED}},{key:"getLastIndex",value:function ag(){return this.param.uniqueIds.length-1}},{key:"checkRange",value:function aC(aH,aE){var aG=this.param.keeps;var aF=this.param.uniqueIds.length;if(aF<=aG){aH=0;aE=this.getLastIndex()}else{if(aE-aH<aG-1){aH=aE-aG+1}}if(this.range.start!==aH){this.updateRange(aH,aE)}}},{key:"updateRange",value:function ap(aF,aE){this.range.start=aF;this.range.end=aE;this.range.padFront=this.getPadFront();this.range.padBehind=this.getPadBehind();this.callUpdate(this.getRange())}},{key:"getEndByStart",value:function af(aG){var aE=aG+this.param.keeps-1;var aF=Math.min(aE,this.getLastIndex());return aF}},{key:"getPadFront",value:function ay(){if(this.isFixedType()){return this.fixedSizeValue*this.range.start}else{return this.getIndexOffset(this.range.start)}}},{key:"getPadBehind",value:function ak(){var aE=this.range.end;var aF=this.getLastIndex();if(this.isFixedType()){return(aF-aE)*this.fixedSizeValue}if(this.lastCalcIndex===aF){return this.getIndexOffset(aF)-this.getIndexOffset(aE)}else{return(aF-aE)*this.getEstimateSize()}}},{key:"getEstimateSize",value:function ao(){return this.isFixedType()?this.fixedSizeValue:this.firstRangeAverageSize||this.param.estimateSize}}]);return az}();var K={dataKey:{type:[String,Function],required:true},dataSources:{type:Array,required:true},dataComponent:{type:[Object,Function],required:true},keeps:{type:Number,"default":30},extraProps:{type:Object},estimateSize:{type:Number,"default":50},direction:{type:String,"default":"vertical"},start:{type:Number,"default":0},offset:{type:Number,"default":0},topThreshold:{type:Number,"default":0},bottomThreshold:{type:Number,"default":0},pageMode:{type:Boolean,"default":false},rootTag:{type:String,"default":"div"},wrapTag:{type:String,"default":"div"},wrapClass:{type:String,"default":""},wrapStyle:{type:Object},itemTag:{type:String,"default":"div"},itemClass:{type:String,"default":""},itemClassAdd:{type:Function},itemStyle:{type:Object},headerTag:{type:String,"default":"div"},headerClass:{type:String,"default":""},headerStyle:{type:Object},footerTag:{type:String,"default":"div"},footerClass:{type:String,"default":""},footerStyle:{type:Object},itemScopedSlots:{type:Object}};var ad={index:{type:Number},event:{type:String},tag:{type:String},horizontal:{type:Boolean},source:{type:Object},component:{type:[Object,Function]},slotComponent:{type:Function},uniqueKey:{type:[String,Number]},extraProps:{type:Object},scopedSlots:{type:Object}};var q={event:{type:String},uniqueKey:{type:String},tag:{type:String},horizontal:{type:Boolean}};var v={created:function X(){this.shapeKey=this.horizontal?"offsetWidth":"offsetHeight"},mounted:function n(){var af=this;if(typeof ResizeObserver!=="undefined"){this.resizeObserver=new ResizeObserver(function(){af.dispatchSizeChange()});this.resizeObserver.observe(this.$el)}},updated:function f(){this.dispatchSizeChange()},beforeDestroy:function Z(){if(this.resizeObserver){this.resizeObserver.disconnect();this.resizeObserver=null}},methods:{getCurrentSize:function U(){return this.$el?this.$el[this.shapeKey]:0},dispatchSizeChange:function I(){this.$parent.$emit(this.event,this.uniqueKey,this.getCurrentSize(),this.hasInitial)}}};var z=W.component("vue-virtual-list-item",{mixins:[v],props:ad,render:function E(ai){var aq=this.tag,an=this.component,aj=this.extraProps,am=aj===void 0?{}:aj,ak=this.index,af=this.source,ah=this.scopedSlots,ag=ah===void 0?{}:ah,ao=this.uniqueKey,ap=this.slotComponent;var al=t({},am,{source:af,index:ak});return ai(aq,{key:ao,attrs:{role:"listitem"}},[ap?ai("div",ap({item:af,index:ak,scope:al})):ai(an,{props:al,scopedSlots:ag})])}});var i=W.component("vue-virtual-list-slot",{mixins:[v],props:q,render:function E(ah){var af=this.tag,ag=this.uniqueKey;return ah(af,{key:ag,attrs:{role:ag}},this.$slots["default"])}});var m={ITEM:"item_resize",SLOT:"slot_resize"};var l={HEADER:"thead",FOOTER:"tfoot"};var g=W.component("vue-virtual-list",{props:K,data:function ab(){return{range:null}},watch:{"dataSources.length":function L(){this.virtual.updateParam("uniqueIds",this.getUniqueIdFromDataSources());this.virtual.handleDataSourcesChange()},keeps:function M(af){this.virtual.updateParam("keeps",af);this.virtual.handleSlotSizeChange()},start:function C(af){this.scrollToIndex(af)},offset:function R(af){this.scrollToOffset(af)}},created:function X(){this.isHorizontal=this.direction==="horizontal";this.directionKey=this.isHorizontal?"scrollLeft":"scrollTop";this.installVirtual();this.$on(m.ITEM,this.onItemResized);if(this.$slots.header||this.$slots.footer){this.$on(m.SLOT,this.onSlotResized)}},activated:function F(){this.scrollToOffset(this.virtual.offset)},mounted:function n(){if(this.start){this.scrollToIndex(this.start)}else{if(this.offset){this.scrollToOffset(this.offset)}}if(this.pageMode){this.updatePageModeFront();document.addEventListener("scroll",this.onScroll,{passive:false})}},beforeDestroy:function Z(){this.virtual.destroy();if(this.pageMode){document.removeEventListener("scroll",this.onScroll)}},methods:{getSize:function G(af){return this.virtual.sizes.get(af)},getSizes:function p(){return this.virtual.sizes.size},getOffset:function s(){if(this.pageMode){return document.documentElement[this.directionKey]||document.body[this.directionKey]}else{var af=this.$refs.root;return af?Math.ceil(af[this.directionKey]):0}},getClientSize:function P(){var ag=this.isHorizontal?"clientWidth":"clientHeight";if(this.pageMode){return document.documentElement[ag]||document.body[ag]}else{var af=this.$refs.root;return af?Math.ceil(af[ag]):0}},getScrollSize:function e(){var ag=this.isHorizontal?"scrollWidth":"scrollHeight";if(this.pageMode){return document.documentElement[ag]||document.body[ag]}else{var af=this.$refs.root;return af?Math.ceil(af[ag]):0}},scrollToOffset:function J(ag){if(this.pageMode){document.body[this.directionKey]=ag;document.documentElement[this.directionKey]=ag}else{var af=this.$refs.root;if(af){af[this.directionKey]=ag}}},scrollToIndex:function h(af){if(af>=this.dataSources.length-1){this.scrollToBottom()}else{var ag=this.virtual.getOffset(af);this.scrollToOffset(ag)}},scrollToBottom:function ac(){var ah=this;var af=this.$refs.shepherd;if(af){var ag=af[this.isHorizontal?"offsetLeft":"offsetTop"];this.scrollToOffset(ag);setTimeout(function(){if(ah.getOffset()+ah.getClientSize()<ah.getScrollSize()){ah.scrollToBottom()}},3)}},updatePageModeFront:function c(){var af=this.$refs.root;if(af){var ai=af.getBoundingClientRect();var ah=af.ownerDocument.defaultView;var ag=this.isHorizontal?ai.left+ah.pageXOffset:ai.top+ah.pageYOffset;this.virtual.updateParam("slotHeaderSize",ag)}},reset:function T(){this.virtual.destroy();this.scrollToOffset(0);this.installVirtual()},installVirtual:function x(){this.virtual=new B({slotHeaderSize:0,slotFooterSize:0,keeps:this.keeps,estimateSize:this.estimateSize,buffer:Math.round(this.keeps/3),uniqueIds:this.getUniqueIdFromDataSources()},this.onRangeChanged);this.range=this.virtual.getRange()},getUniqueIdFromDataSources:function d(){var af=this.dataKey;return this.dataSources.map(function(ag){return typeof af==="function"?af(ag):ag[af]})},onItemResized:function y(ag,af){this.virtual.saveSize(ag,af);this.$emit("resized",ag,af)},onSlotResized:function aa(ah,ag,af){if(ah===l.HEADER){this.virtual.updateParam("slotHeaderSize",ag)}else{if(ah===l.FOOTER){this.virtual.updateParam("slotFooterSize",ag)}}if(af){this.virtual.handleSlotSizeChange()}},onRangeChanged:function O(af){this.range=af},onScroll:function o(af){var ai=this.getOffset();var ah=this.getClientSize();var ag=this.getScrollSize();if(ai<0||ai+ah>ag+1||!ag){return}this.virtual.handleScroll(ai);this.emitEvent(ai,ah,ag,af)},emitEvent:function A(ai,ah,ag,af){this.$emit("scroll",af,this.virtual.getRange());if(this.virtual.isFront()&&!!this.dataSources.length&&ai-this.topThreshold<=0){this.$emit("totop")}else{if(this.virtual.isBehind()&&ai+ah+this.bottomThreshold>=ag){this.$emit("tobottom")}}},getRenderSlots:function H(av){var ar=[];var at=this.range,ai=at.start,ag=at.end;var ak=this.dataSources,ah=this.dataKey,af=this.itemClass,ax=this.itemTag,an=this.itemStyle,am=this.isHorizontal,ao=this.extraProps,aq=this.dataComponent,ap=this.itemScopedSlots;var au=this.$scopedSlots&&this.$scopedSlots.item;for(var aj=ai;aj<=ag;aj++){var aw=ak[aj];if(aw){var al=typeof ah==="function"?ah(aw):aw[ah];if(typeof al==="string"||typeof al==="number"){ar.push(av(z,{props:{index:aj,tag:ax,event:m.ITEM,horizontal:am,uniqueKey:al,source:aw,extraProps:ao,component:aq,slotComponent:au,scopedSlots:ap},style:an,"class":"".concat(af).concat(this.itemClassAdd?" "+this.itemClassAdd(aj):"")}))}else{console.warn("Cannot get the data-key '".concat(ah,"' from data-sources."))}}else{console.warn("Cannot get the index '".concat(aj,"' from data-sources."))}}return ar}},render:function E(ar){var at=this.$slots,aq=at.header,am=at.footer;var ai=this.range,ay=ai.padFront,aA=ai.padBehind;var aj=this.isHorizontal,av=this.pageMode,au=this.rootTag,ao=this.wrapTag,az=this.wrapClass,ag=this.wrapStyle,al=this.headerTag,af=this.headerClass,ak=this.headerStyle,ap=this.footerTag,an=this.footerClass,aw=this.footerStyle;var ax={padding:aj?"0px ".concat(aA,"px 0px ").concat(ay,"px"):"".concat(ay,"px 0px ").concat(aA,"px")};var ah=ag?Object.assign({},ag,ax):ax;return ar(au,{ref:"root",on:{"&scroll":!av&&this.onScroll}},[aq?ar(i,{"class":af,style:ak,props:{tag:al,event:m.SLOT,uniqueKey:l.HEADER}},aq):null,ar(ao,{"class":az,attrs:{role:"group"},style:ah},this.getRenderSlots(ar)),am?ar(i,{"class":an,style:aw,props:{tag:ap,event:m.SLOT,uniqueKey:l.FOOTER}},am):null,ar("div",{ref:"shepherd",style:{width:aj?"0px":"100%",height:aj?"100%":"0px"}})])}});return g})));